PROMPT: Docker setup to run backend and frontend

RESPONSE: 

Here’s a **complete Docker setup** to run **both backend (Node.js/Express) and frontend (React or static site)** together using **Docker Compose**. This allows you to start both services with a single command.

---

## 1️⃣ Project Structure

```
project/
├─ backend/
│   ├─ Dockerfile
│   ├─ package.json
│   └─ src/
├─ frontend/
│   ├─ Dockerfile
│   ├─ package.json
│   └─ src/
└─ docker-compose.yml
```

---

## 2️⃣ Backend Dockerfile (`backend/Dockerfile`)

```dockerfile
# Use Node.js LTS
FROM node:20-alpine

WORKDIR /usr/src/app

# Copy package files and install dependencies
COPY package*.json ./
RUN npm install

# Copy source code
COPY . .

# Build TypeScript (optional)
RUN npm run build

EXPOSE 3000

# Start backend
CMD ["node", "dist/server.js"]
```

> If your backend is plain JS, skip the build step and run `node src/server.js` directly.

---

## 3️⃣ Frontend Dockerfile (`frontend/Dockerfile`)

```dockerfile
# Build stage
FROM node:20-alpine AS build

WORKDIR /app

COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Production stage using Nginx
FROM nginx:alpine
COPY --from=build /app/build /usr/share/nginx/html

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

---

## 4️⃣ Docker Compose (`docker-compose.yml`)

```yaml
version: "3.9"

services:
  backend:
    build: ./backend
    container_name: backend
    ports:
      - "3000:3000"
    environment:
      NODE_ENV: production
      # Add your AWS/DynamoDB/SQS env variables here
    networks:
      - app-network

  frontend:
    build: ./frontend
    container_name: frontend
    ports:
      - "8080:80"
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
```

---

## 5️⃣ Usage

1. Build and start containers:

```bash
docker-compose up --build
```

2. Access the services:

* **Backend API:** `http://localhost:3000/api/...`
* **Frontend App:** `http://localhost:8080`

---

### ✅ Notes

* Both services are on the same **Docker network**, so the frontend can call the backend using the container name (`http://backend:3000/api/...`) if needed inside the network.
* You can add **volumes** for local development to auto-reload code.
* Environment variables for AWS/SQS/DynamoDB can be set in a `.env` file and referenced in `docker-compose.yml`.

---

If you want, I can provide a **development-friendly version** where **frontend hot reload works** inside Docker along with backend SSE notifications. This is ideal for your SSE + bulk import/export setup.

Do you want me to do that?
